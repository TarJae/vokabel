---
title: "Creating Infinite Questions"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Creating Infinite Questions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r warning=FALSE, message=FALSE, include=FALSE}
pkgload::load_all()
```

```{r setup}
library(shinyQuiz)
```

Creating a dynamic quiz can make it more engaging and challenging for users. The `create_question_sandbox()` function in `shinyQuiz` allows you to generate random questions. This vignette will guide you through how to use this function effectively.

The `create_question_sandbox()` function takes two main arguments:  
- .f: A function that generates a single random question.  
- n: The number of random questions to generate for the quiz.

``` {r eval=FALSE}
create_question_sandbox(.f = your_function, n = 10)
```

<br>

## Creating a Random Question Generator
Before you can use `create_question_sandbox()`, you'll need to create a function that generates a single random question. This function should return a question object created by `create_question()`.

Here's an example that generates a random question about whether a number is even or odd:

``` {r eval=FALSE}
random_question <- function() {
  number <- round(rnorm(1, 30, 10), 0)
  rand_prompt <- paste('Is', number, 'an even number?')

  q <- create_question(
    prompt = rand_prompt,
    add_choice('Yes, it is even', correct = number %% 2 == 0),
    add_choice('No, it is odd', correct = number %% 2 != 0)
  )

  return(q)
}
```

You can test your function by running it a few times and verifying the preview changes each time.

``` {r eval=FALSE}
random_question()
random_question()
```

## Putting It All Together
Once you have your random question generator function, you can pass it to `create_question_sandbox()` along with the number of questions you want to generate.

``` {r eval=FALSE}
create_quiz(
  create_question_sandbox(.f = random_question, n = 20)
)
```

This will create a quiz with 20 randomly generated questions about whether numbers are even or odd.

<br>

## Randomizing on-the-fly

Coming soon!

<!--
### Pre-Created vs. Dynamic Quizzes
When you run `create_question_sandbox()` outside of a Shiny server function, the set of questions it generates is fixed at that moment. This means that if you deploy a Shiny application with this pre-created quiz, every user will see the same set of questions.

``` {r eval=FALSE}
# Pre-created quiz
my_quiz <- create_quiz(
  create_question_sandbox(.f = random_question, n = 20)
)
```

### Dynamic Randomization within Shiny Server
To generate a new set of questions for each user or session, you can include `create_question_sandbox()` within your Shiny app's server function. This way, the function will re-execute each time a new user accesses the app, providing a unique set of questions.

``` {r eval=FALSE}
# Shiny app with dynamic quiz
shiny::shinyApp(
  ui = your_ui_here,
  server = function(input, output, session) {
    my_dynamic_quiz <- create_quiz(
      create_question_sandbox(.f = random_question, n = 20)
    )
    # rest of your server code
  }
)
```

By placing create_question_sandbox() inside the server function, you ensure that the quiz is truly dynamic, offering a different experience for each user or at different times.

-->

<br>

That's it! Be sure to check out the documentation for `create_question_sandbox()` for more information.